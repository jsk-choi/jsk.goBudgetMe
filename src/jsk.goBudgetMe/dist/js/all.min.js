var GbmApp=React.createClass({loadTranFromServer:function(){console.log(this.props.url),$.ajax({url:this.props.url,dataType:"json",cache:!1,success:function(t){console.log(t),this.setState({data:t}),console.log("state: "+JSON.stringify(this.state))}.bind(this),error:function(t,e,n){console.error(this.props.url,e,n.toString())}.bind(this)})},handleTransactionSubmit:function(t){},getInitialState:function(){return{data:[]}},componentWillMount:function(){console.log("will mount")},componentDidMount:function(){console.log("did mount"),this.loadTranFromServer()},render:function(){return React.createElement("h1",null,"nopie")}});ReactDOM.render(React.createElement(GbmApp,{url:"/api/values",pollInterval:5e3}),document.getElementById("content"));var TransactionRow=React.createClass({render:function(){return React.createElement("tr",{className:"transaction",uniqueId:this.props.data.UniqueId},React.createElement("td",null,this.props.data.TransactionDate),React.createElement("td",null,this.props.data.TransactionDesc),React.createElement("td",null,this.props.data.Amount),React.createElement("td",null,this.props.data.Posted.toString()))}}),TransactionTable=React.createClass({render:function(){var t=this.props.data.map(function(t){return React.createElement(TransactionRow,{data:t})});return React.createElement("table",{className:"commentList"},t)}}),CommentForm=React.createClass({handleSubmit:function(t){t.preventDefault();var e=this.refs.transactionDesc.value.trim(),n=this.refs.transactionAmount.value.trim();this.props.onCommentSubmit({TransactionDate:Date.now(),TransactionDesc:e,Amount:parseFloat(n)}),e&&n&&(this.refs.transactionDesc.value="",this.refs.transactionAmount.value="")},render:function(){return React.createElement("form",{className:"commentForm",onSubmit:this.handleSubmit},React.createElement("input",{type:"text",ref:"transactionDesc",placeholder:"Description..."}),React.createElement("input",{type:"text",ref:"transactionAmount",placeholder:"Amount"}),React.createElement("input",{type:"submit",value:"post"}))}}),CommentBox=React.createClass({loadCommentsFromServer:function(){var t=new XMLHttpRequest;t.open("get",this.props.url,!0),t.onload=function(){var e=JSON.parse(t.responseText);this.setState({data:e}),console.log("gotten: "+JSON.stringify(this.state))}.bind(this),t.send()},handleTransactionSubmit:function(t){var e=new Date;t.TransactionDate=e.getYear()+1900+"-"+(e.getMonth()+1)+"-"+e.getDate()+" "+e.getHours()+":"+e.getMinutes(),console.log(t);var n=new XMLHttpRequest;n.open("post",this.props.submitUrl,!0),n.setRequestHeader("Content-Type","application/json;"),n.onload=function(){this.loadCommentsFromServer()}.bind(this),n.send(JSON.stringify(t))},getInitialState:function(){return{data:[]}},componentDidMount:function(){this.loadCommentsFromServer()},render:function(){return React.createElement("div",{className:"commentBox"},React.createElement("h1",null,"Comments"),React.createElement(TransactionTable,{className:"transaction",data:this.state.data}),React.createElement(CommentForm,{onCommentSubmit:this.handleTransactionSubmit}))}});ReactDOM.render(React.createElement(CommentBox,{url:"/api/values",submitUrl:"/api/values",pollInterval:5e3}),document.getElementById("content"));